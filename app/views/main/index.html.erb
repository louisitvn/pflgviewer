    <nav class="navbar navbar-inverse navbar-fixed-top" role="navigation">
      <div class="container">
        <div class="navbar-header">
          <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false" aria-controls="navbar">
            <span class="sr-only">Toggle navigation</span>
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
          </button>
          <a class="navbar-brand" href="#"><span class="glyphicon glyphicon-home" aria-hidden="true"></span></a>
        </div>
        <div id="navbar" class="collapse navbar-collapse">
          <ul class="nav navbar-nav">
            <li><a href="#">Delivered</a></li>
            <li><a href="#about">Deferred</a></li>
            <li><a href="#contact">Bounced</a></li>
            <li><a href="#contact">Rejected</a></li>
          </ul>
        </div><!--/.nav-collapse -->
      </div>
    </nav>

    <div class="container">
      <div class="page-header">
        <div class="row">
          <div class='col-sm-3'>
            <div class="form-group">
              <div class='input-group date'>
                <input type='text' class="form-control"  id='datetimepicker1' value="<%= @from %>"/>
                <span id="btnShowDatetimePicker1" class="input-group-addon"><span class="glyphicon glyphicon-calendar"></span></span>
              </div>
            </div>
          </div>
          <div class='col-sm-3'>
            <div class="form-group">
              <div class='input-group date'>
                <input type='text' class="form-control"  id='datetimepicker2' value="<%= @to %>"/>
                <span id="btnShowDatetimePicker2" class="input-group-addon"><span class="glyphicon glyphicon-calendar"></span></span>
              </div>
            </div>
          </div>

          <div class="col-sm-6">
            <div class="btn-group" role="group" aria-label="...">
              <button id="btnRefresh" type="btnRefresh" class="btn btn-default">REFRESH</button>
            </div>
          </div>
        </div>

        <div class="row">
          <div class="col-sm-8">
            <div class="btn-group" role="group" aria-label="...">
              <button id="btnToday" type="button" class="btn btn-default">Today</button>
              <button id="btnYesterday" type="button" class="btn btn-default">Yesterday</button>
              <button id="btnThisWeek" type="button" class="btn btn-default">This Week</button>
              <button id="btnLastWeek" type="button" class="btn btn-default">Last Week</button>
              <button id="btnThisMonth" type="button" class="btn btn-default">This Month</button>
              <button id="btnLastMonth" type="button" class="btn btn-default">Last Month</button>
            </div>
          </div>
        </div>
      </div>
      <div class="row">
        <div class="col-md-3">
          <ul class="list-group">
            <li class="list-group-item active">
              Domain by % delivered
            </li>
            <% @dommain_by_sent.each { |r| %>
              <li class="list-group-item">
                <span class="badge"><%= number_to_percentage r.percentage, precision: 2 %></span>
                <%= r.domain %>
              </li>
            <% } %>
            
            <% 1.upto(5 - @dommain_by_sent.count) do |i| %>
              <li class="list-group-item">
                ---
              </li>
            <% end %>
          </ul>
        </div>

        <div class="col-md-3">
          <ul class="list-group">
            <li class="list-group-item active">
              Domain by % deferred
            </li>
            <% @dommain_by_deferred.each { |r| %>
              <li class="list-group-item">
                <span class="badge"><%= number_to_percentage r.percentage, precision: 2 %></span>
                <%= r.domain %>
              </li>
            <% } %>
            
            <% 1.upto(5 - @dommain_by_deferred.count) do |i| %>
              <li class="list-group-item">
                ---
              </li>
            <% end %>
          </ul>
        </div>

        <div class="col-md-3">
          <ul class="list-group">
            <li class="list-group-item active">
              Domain by % bounced
            </li>
            <% @dommain_by_bounced.each { |r| %>
              <li class="list-group-item">
                <span class="badge"><%= number_to_percentage r.percentage, precision: 2 %></span>
                <%= r.domain %>
              </li>
            <% } %>
            
            <% 1.upto(5 - @dommain_by_bounced.count) do |i| %>
              <li class="list-group-item">
                ---
              </li>
            <% end %>
          </ul>
          </ul>
        </div>

        <div class="col-md-3">
          <ul class="list-group">
            <li class="list-group-item active">
              Domain by % rejected
            </li>
            <% @dommain_by_rejected.each { |r| %>
              <li class="list-group-item">
                <span class="badge"><%= number_to_percentage r.percentage, precision: 2 %></span>
                <%= r.domain %>
              </li>
            <% } %>
            
            <% 1.upto(5 - @dommain_by_rejected.count) do |i| %>
              <li class="list-group-item">
                ---
              </li>
            <% end %>
          </ul>
        </div>
      </div>

      <div class="row">
        <div class="col-md-3">
          <ul class="list-group">
            <li class="list-group-item active">
              Domain by volume delivered
            </li>

            <% @dommain_by_sent.each { |r| %>
              <li class="list-group-item">
                <span class="badge"><%= r.volume %></span>
                <%= r.domain %>
              </li>
            <% } %>
            
            <% 1.upto(5 - @dommain_by_sent.count) do |i| %>
              <li class="list-group-item">
                ---
              </li>
            <% end %>
          </ul>
        </div>

        <div class="col-md-3">
          <ul class="list-group">
            <li class="list-group-item active">
              Domain by volume deferred
            </li>
            <% @dommain_by_deferred.each { |r| %>
              <li class="list-group-item">
                <span class="badge"><%= r.volume %></span>
                <%= r.domain %>
              </li>
            <% } %>
            
            <% 1.upto(5 - @dommain_by_deferred.count) do |i| %>
              <li class="list-group-item">
                ---
              </li>
            <% end %>
          </ul>
        </div>

        <div class="col-md-3">
          <ul class="list-group">
            <li class="list-group-item active">
              Domain by volume bounced
            </li>
            <% @dommain_by_bounced.each { |r| %>
              <li class="list-group-item">
                <span class="badge"><%= r.volume %></span>
                <%= r.domain %>
              </li>
            <% } %>
            
            <% 1.upto(5 - @dommain_by_bounced.count) do |i| %>
              <li class="list-group-item">
                ---
              </li>
            <% end %>
          </ul>
        </div>

        <div class="col-md-3">
          <ul class="list-group">
            <li class="list-group-item active">
              Domain by volume rejected
            </li>
            <% @dommain_by_rejected.each { |r| %>
              <li class="list-group-item">
                <span class="badge"><%= r.volume %></span>
                <%= r.domain %>
              </li>
            <% } %>
            
            <% 1.upto(5 - @dommain_by_rejected.count) do |i| %>
              <li class="list-group-item">
                ---
              </li>
            <% end %>
          </ul>
        </div>
      </div>

      <div class="page-header">
        <h1>Statistics</h1>
      </div>
      <div class="row">
        <div class="col-md-12">
          <div class="panel panel-default">
            <!-- Default panel contents -->
            <div class="panel-heading">Panel heading</div>
            <div class="panel-body">
              <p>Panel body text goes here</p>
            </div>

            <!-- Table -->
            <table id="main-table" class="display table" cellspacing="0" width="100%">
              <thead>
                <tr>
                  <th>Name</th>
                  <th>Size</th>
                  <th>Domain</th>
                </tr>
              </thead>

              <tfoot>
                <tr>
                  <th>Name</th>
                  <th>Position</th>
                  <th>Office</th>
                </tr>
              </tfoot>
            </table>
          </div>
          
        </div>
      </div>
    </div>
  
<script>
  // Global
  var datatable;
  var MainIndex = {
    LIMIT: '5',
    OFFSET: '0',
    reload: function(params) {
      params.limit = this.LIMIT;
      params.offset = this.OFFSET;
      window.location.href = window.location.pathname + '?' + $.param(params);
    }
  }

	jQuery(document).ready(function() {
    // datepicker
    $('#datetimepicker1').datepicker();
    $('#datetimepicker2').datepicker();

    $( "#datetimepicker1" ).datepicker( "option", "dateFormat", 'yy/mm/dd' );
    $( "#datetimepicker2" ).datepicker( "option", "dateFormat", 'yy/mm/dd' );

    $('#datetimepicker1').val('<%= @from %>');
    $('#datetimepicker2').val('<%= @to %>');


    // bind event
    $( "#btnToday" ).on( "click", function() {
      $( this ).prop( "disabled", true );
      var params = {
        from: moment().format('YYYY/MM/DD'),
        to: moment().format('YYYY/MM/DD')
      };

      $('#datetimepicker1').val(params.from);
      $('#datetimepicker2').val(params.to);

      MainIndex.reload(params);
    });

    $( "#btnYesterday" ).on( "click", function() {
      $( this ).prop( "disabled", true );
      var params = {
        from: moment().subtract(1, "days").format('YYYY/MM/DD'),
        to: moment().subtract(1, "days").format('YYYY/MM/DD')
      };

      $('#datetimepicker1').val(params.from);
      $('#datetimepicker2').val(params.to);

      MainIndex.reload(params);
    });

    $( "#btnThisWeek" ).on( "click", function() {
      $( this ).prop( "disabled", true );
      var params = {
        from: moment().startOf('week').format('YYYY/MM/DD'),
        to: moment().endOf('week').format('YYYY/MM/DD'),
      };

      $('#datetimepicker1').val(params.from);
      $('#datetimepicker2').val(params.to);

      MainIndex.reload(params);
    });

    $( "#btnLastWeek" ).on( "click", function() {
      $( this ).prop( "disabled", true );
      var params = {
        from: moment().subtract(7, "days").startOf('week').format('YYYY/MM/DD'),
        to: moment().subtract(7, "days").endOf('week').format('YYYY/MM/DD'),
      };

      $('#datetimepicker1').val(params.from);
      $('#datetimepicker2').val(params.to);

      MainIndex.reload(params);
    });

    $( "#btnThisMonth" ).on( "click", function() {
      $( this ).prop( "disabled", true );
      var params = {
        from: moment().startOf('month').format('YYYY/MM/DD'),
        to: moment().endOf('month').format('YYYY/MM/DD'),
      };

      $('#datetimepicker1').val(params.from);
      $('#datetimepicker2').val(params.to);

      MainIndex.reload(params);
    });

    $( "#btnLastMonth" ).on( "click", function() {
      $( this ).prop( "disabled", true );
      var params = {
        from: moment().subtract(1, "months").startOf('month').format('YYYY/MM/DD'),
        to: moment().subtract(1, "months").endOf('month').format('YYYY/MM/DD'),
      };

      $('#datetimepicker1').val(params.from);
      $('#datetimepicker2').val(params.to);

      MainIndex.reload(params);
    });

    $( "#btnRefresh" ).on( "click", function() {
      $( this ).prop( "disabled", true );
      var params = {
        from: $('#datetimepicker1').val(),
        to: $('#datetimepicker2').val(),
      };

      MainIndex.reload(params);
    });

    $( "#btnShowDatetimePicker1" ).on( "click", function() {
      $('#datetimepicker1').datepicker( 'show' );
    });

    $( "#btnShowDatetimePicker2" ).on( "click", function() {
      $('#datetimepicker2').datepicker( 'show' );
    });

    // Init DataTable
    datatable = $('#main-table').dataTable( {
      serverSide: true,
      processing: true,
      retrieve: true,
      dom: 'rtip',
      deferLoading: true,
      order: [[ 1, "asc" ]],
      pageLength: 20,
      ajax: {
        url: '/main/index.json',
        dataSrc: 'entries',
        data: function(params) {
          //params.filter = VyrianSearchPage.filter;
        }
      },
      columns: [
        { 
          "name": "ID",
          "data": function(row, b, c, d){
            return row.id
          }
        },
        { "name": "domain", "data": "domain" },
        { "name": "size", "title": "Size",  "data": 'size' },
      ],
      
      drawCallback: function( settings ) {
        //
      }
    } );

    // load
    datatable.DataTable().draw();
	});
</script>